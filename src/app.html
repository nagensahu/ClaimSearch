<template>
  <lightning-card>
    <lightning-layout multiple-rows>
      <lightning-layout-item padding="around-small" size="12">
        <div class="slds-text-heading_small slds-border_bottom">Claim Search</div>
      </lightning-layout-item>
      <lightning-layout-item size="12">
        <lightning-layout>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-combobox name="claimtype" label="Claim Type" value={value} placeholder="Select"
              options={claimtypeoptions}>
            </lightning-combobox>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="3">
            <lightning-input type="text" name="claimnumber" label="Claims Number" value="">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="3">
            <lightning-input type="text" name="memberid" label="Member ID" value="">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-input type="date" name="datefrom" label="Date From">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-input type="date" name="dateto" label="Date To"></lightning-input>
          </lightning-layout-item>
        </lightning-layout>
      </lightning-layout-item>
      <lightning-layout-item size="12">
        <lightning-layout>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-input type="text" name="authreferralid" label="Authorization/Referral ID" value="">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-input type="text" name="providerfacilityid" label="Provider/Facility ID" value="">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="2">
            <lightning-input type="text" name="providertaxid" label="Provider tax ID">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="3">
            <lightning-input type="text" name="providerfirstnamefacility" label="Provider first name/Facility" value="">
            </lightning-input>
          </lightning-layout-item>
          <lightning-layout-item padding="around-small" size="3">
            <lightning-input type="tdxt" name="providerlastname" label="Provider last name">
            </lightning-input>
          </lightning-layout-item>
        </lightning-layout>
      </lightning-layout-item>
      <template if:true={showAdvanced}>
        <lightning-layout-item padding="around-small" size="12">
          <div class="slds-text-title slds-border_bottom">Advanced Search</div>
        </lightning-layout-item>
        <lightning-layout-item size="12">
          <lightning-layout>
            <lightning-layout-item padding="around-small" size="2">
              <lightning-input type="text" name="typeofservice" label="Type of service" value={procedurecodestring}>
              </lightning-input>
              <c-pillcontainer items={procedurecodelist}></c-pillcontainer>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="2">
              <lightning-input type="text" name="procedurecode" label="Procedure code" value={procedurecodestring}>
              </lightning-input>
              <c-pillcontainer items={procedurecodelist}></c-pillcontainer>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="2">
              <lightning-input type="text" name="diagnosiscode" label="Diagnosis code" value={procedurecodestring}>
              </lightning-input>
              <c-pillcontainer items={procedurecodelist}></c-pillcontainer>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="3">
              <lightning-input type="text" name="revenuecode" label="Revenue code" value="">
              </lightning-input>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="3">
              <lightning-input type="tdxt" name="totalcharge" label="Total charged">
              </lightning-input>
            </lightning-layout-item>
          </lightning-layout>
        </lightning-layout-item>
        <lightning-layout-item size="12">
          <lightning-layout>
            <lightning-layout-item padding="around-small" size="2">
              <lightning-combobox name="amounts" label="Amounts" value={value} placeholder="Select"
                options={amountsoptions}>
              </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="3">
              <lightning-combobox name="businesscategory" label="Business Category" value={value} placeholder="Select"
                options={businesscategoryoptions}>
              </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="2">
              <lightning-input type="text" name="groupid" label="Group Id">
              </lightning-input>
            </lightning-layout-item>
            <lightning-layout-item padding="around-small" size="3">
              <lightning-input type="text" name="voucherchecknumber" label="Voucher/Check number" value="">
              </lightning-input>
            </lightning-layout-item>
          </lightning-layout>
        </lightning-layout-item>

      </template>
      <lightning-layout-item size="12">
        <lightning-layout>
          <lightning-layout-item padding="around-small">
            <lightning-button variant={buttonStyle} label={advancedOptionText} title="advanced"
              onclick={handleAdvancedClick} class="slds-m-left_x-small"></lightning-button>
          </lightning-layout-item>
          <lightning-layout-item alignment-bump="left" padding="around-small">
            <lightning-button variant="neutral" label="Clear" title="search" class="slds-m-left_x-small">
            </lightning-button>
            <lightning-button variant="brand" label="Get Claims" title="search" onclick={handleClick}
              class="slds-m-left_x-small"></lightning-button>
          </lightning-layout-item>
        </lightning-layout>
      </lightning-layout-item>
      <!--Claim Search Results-->
      <template if:false={isTableEmpty}>
        <lightning-layout-item padding="around-small" size="12">
          <c-claimresult></c-claimresult>
        </lightning-layout-item>
      </template>
      <template if:true={isTableEmpty}>
        <!-- 
                    Display if no data is returned from the search
            <lightning-layout-item padding="around-small" size="12">
                        <lightning-layout horizontal-align="center">
                        <p>
                            <lightning-icon icon-name="utility:info" alternative-text="Connected" size="x-small"
                                title="x-small size"></lightning-icon>&nbsp;There are no records that match these
                            criteria.
                        </p>
                    </lightning-layout> 
            </lightning-layout-item>
                    -->
      </template>
    </lightning-layout>
  </lightning-card>
  <!--Modal Section-->
  <div class="slds-theme_default">
    <template if:true={openmodel}>
      <div>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
          aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
          <div class="slds-modal__container">
            <header class="slds-modal__header">
              <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                title="Close" onclick={closeModal}>
                                <lightning-icon icon-name="utility:close" size="medium">
                                </lightning-icon>
                                <span class="slds-assistive-text">Close</span>
                            </button>
              <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Additional Plan
                Details</h2>
            </header>
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
              <lightning-layout>
                <lightning-layout-item padding="around-small" size="12">
                  <lightning-datatable key-field="memberId" columns={relatedColumns} data={relatedData}
                    hide-checkbox-column>
                  </lightning-datatable>
                </lightning-layout-item>
              </lightning-layout>
            </div>
            <footer class="slds-modal__footer">
              <lightning-button label="Close" variant="neutral" onclick={closeModal}></lightning-button>
            </footer>
          </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
      </div>
    </template>
  </div>
</template>